<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/style_folder/header.css">
  <link rel="stylesheet" href="/style_folder/edit_student.css">
  <title>Edit Student Profile</title>
</head>
<body>
  <!------------------------------------------------HEADER-->
  <%- include('_header') %>
  <!--------------------------------------------------HEADER-->
  <h1>Edit Student Profile</h1>
  <div class="container">
    <div class="box">

      <form action="/students/<%= student.id %>/edit" method="POST" enctype="multipart/form-data">
        
        <div class="photo">
          <img src="<%= student.photo_url %>" alt="Profile Photo">
        </div>
        <div class="name">
          <label for="name">Name:</label>
          <input type="text" id="name" name="name" value="<%= student.name %>">
        </div>
        <div class="level">
          <label for="level">Level:</label>
          <input type="text" id="level" name="level" value="<%= student.level %>">
        </div>
        <div class="email">
          <label for="email">Email:</label>
          <input type="email" id="email" name="email" value="<%= student.email %>">
        </div>
        <div class="occupation">
          <label for="occupation">Occupation:</label>
          <input type="text" id="occupation" name="occupation" value="<%= student.occupation %>">
        </div>
        <div class="phone">
          <label for="phone_number">Phone:</label>
          <input type="text" id="phone_number" name="phone_number" value="<%= student.phone_number %>">
        </div>

        <div class="address">
          <label for="address_line1">Address Line 1:</label>
          <input type="text" id="address_line1" name="address_line1" value="<%= student.address_line1 %>">
          <label for="address_line2">Address Line 2:</label>
          <input type="text" id="address_line2" name="address_line2" value="<%= student.address_line2 %>">
          <label for="postal_code">Postal Code:</label>
          <input type="text" id="postal_code" name="postal_code" value="<%= student.postal_code %>">
        </div>
        <div class="photo-url">
          <label for="photo_url">Photo URL:</label>
          <input type="text" id="photo_url" name="photo_url" value="<%= student.photo_url %>">
        </div>
        <div class="photo-upload">
          <label for="photo">Upload New Photo:</label>
          <input type="file" id="photo" name="photo">
        </div>

        <div class="buttons">

          <button type="submit" class="save-changes-button">Save Changes</button>

      </form> <!--Form with all the inputs for student's info-->
        
          <form action="/students/<%= student.id %>/delete" method="POST" onsubmit="return confirm('Are you sure you want to delete this profile?');">
            <button type="submit" class="delete-button">Delete Profile</button>
          </form> <!--Form with the delete button-->

        </div> <!--Buttons div that sets the elements side by side-->

      
    </div> <!--The box that contains the profile-->
  </div> <!-- Container beneath the header-->

  <script>
    // Basic notification system
    function showNotification(message) {
      const notification = document.createElement('div');
      notification.className = 'notification';
      notification.innerText = message;
      document.body.appendChild(notification);
      setTimeout(() => {
        notification.remove();
      }, 3000);
    }

    // Check for query parameters to show notifications
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has('deleted')) {
      showNotification('Student profile deleted successfully.');
    }
  </script>
</body>
</html>